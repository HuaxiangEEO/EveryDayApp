# 中国象棋对战游戏

基于React + TypeScript开发的中国象棋人机对战游戏，支持完整的复盘功能和多棋局管理。

## 功能特性

### 🎮 完整的象棋规则实现
- ✅ 所有棋子的走法规则（将/帅、士/仕、象/相、马、车、炮、兵/卒）
- ✅ 塞象眼、蹩马腿、炮翻山等特殊规则
- ✅ 九宫格限制、过河规则等
- ✅ 将死检测和胜负判断

### 👥 人机对战模式
- ✅ 玩家控制红方，AI控制黑方
- ✅ AI智能走棋（Minimax算法，2层搜索，Alpha-Beta剪枝）
- ✅ 当前玩家提示和AI思考状态显示

### 💾 棋局保存和加载
- ✅ 手动保存棋局（按时间戳自动命名）
- ✅ 支持保存多个棋局（最多50个）
- ✅ 游戏结束时自动保存
- ✅ 保存列表管理（查看、加载、删除）
- ✅ 初始状态可查看已保存的棋局

### 📖 复盘功能
- ✅ 完整的走棋记录（每一步的详细信息）
- ✅ 复盘回放（前进、后退、跳转到指定步数）
- ✅ 复盘控制面板（第一步、上一步、下一步、最后一步）
- ✅ 复盘模式下高亮显示当前步的走棋
- ✅ 加载棋局后可直接复盘或继续对弈

### 🎨 美观的棋盘和棋子UI
- ✅ 传统风格的棋盘设计
- ✅ 楚河汉界标识
- ✅ 九宫格斜线
- ✅ 棋子选中和移动提示动画
- ✅ 最近一步走棋高亮显示（黄色边框+脉冲动画）
- ✅ 复盘模式下走棋位置高亮

### 📱 响应式设计
- ✅ 自适应屏幕尺寸
- ✅ 移动端优化布局

## 项目结构

```
src/
├── components/          # UI组件
│   ├── ChessBoard.tsx  # 棋盘组件
│   ├── ChessPiece.tsx  # 棋子组件
│   ├── ReplayControls.tsx  # 复盘控制面板
│   └── SavedGamesList.tsx  # 已保存棋局列表
├── hooks/              # React Hooks
│   ├── useGameState.ts # 游戏状态管理
│   └── useReplay.ts    # 复盘状态管理
├── types/              # TypeScript类型定义
│   └── chess.ts        # 象棋相关类型
├── utils/              # 工具函数
│   ├── ai.ts           # AI算法
│   ├── gameLogic.ts    # 游戏逻辑（将死检测等）
│   ├── gameStorage.ts  # 棋局保存/加载
│   └── moveRules.ts    # 走棋规则
├── App.tsx             # 主应用组件
└── main.tsx            # 入口文件
```

## 快速开始

### 安装依赖

```bash
npm install
```

### 开发运行

```bash
npm run dev
```

### 构建生产版本

```bash
npm run build
```

## 使用说明

### 基本操作
1. **开始游戏**：页面加载后自动开始新游戏，红方先行
2. **走棋**：点击己方棋子选中，再点击目标位置移动
3. **保存棋局**：点击"保存棋局"按钮，棋局会按时间戳自动命名保存
4. **重新开始**：点击"重新开始"按钮清除当前棋局

### 复盘功能
1. **查看已保存的棋局**：点击"已保存的棋局"按钮打开列表
2. **加载棋局**：
   - 游戏已结束：点击"复盘"按钮直接进入复盘模式
   - 游戏未结束：点击"继续"按钮加载后继续对弈，或点击"复盘"查看走棋过程
3. **复盘操作**：
   - 使用控制按钮前进/后退查看每一步
   - 点击"退出复盘"返回最终状态

### 多棋局管理
- 每次保存都会创建新的棋局记录（不会覆盖）
- 最多保存50个棋局，超出后自动删除最旧的
- 可以在列表中查看、加载或删除任意棋局

## 技术栈

- **React 18** - UI框架
- **TypeScript** - 类型安全
- **Vite** - 构建工具
- **CSS3** - 样式和动画

## 相关文档

- [PROJECT_STRUCTURE.md](./PROJECT_STRUCTURE.md) - 项目结构详细说明
- [DESIGN_REPLAY.md](./DESIGN_REPLAY.md) - 复盘功能设计文档

## 核心算法

### AI算法
- **Minimax算法**：2层搜索深度
- **Alpha-Beta剪枝**：优化搜索性能
- **评估函数**：考虑棋子价值、位置价值、吃子、将军等因素

### 走棋规则
- 各棋子走法完全符合中国象棋规则
- 特殊规则：塞象眼、蹩马腿、炮翻山
- 边界限制：九宫格、过河等

### 将死检测
- 检查王是否被将军
- 检查是否有解将的方法（移动、吃子、阻挡）

## 开发计划

- [x] 项目基础结构
- [x] 棋盘和棋子渲染
- [x] 游戏状态管理
- [x] 棋子选择和移动交互
- [x] 走棋规则验证
- [x] 胜负判断逻辑
- [x] AI智能走棋
- [x] 棋局保存和加载
- [x] 复盘功能
- [x] 多棋局管理
- [x] 最近一步走棋高亮
- [ ] 音效
- [ ] 自动播放功能
- [ ] 中文记谱法显示

## 快速开始

### 安装依赖

```bash
npm install
```

### 开发运行

```bash
npm run dev
```

### 构建生产版本

```bash
npm run build
```

## 技术栈

- React 18
- TypeScript
- Vite
- CSS3

## 象棋规则

- 红方（下方）：将、士、象、马、车、炮、兵
- 黑方（上方）：帅、仕、相、马、车、炮、卒
- 遵循传统中国象棋规则
